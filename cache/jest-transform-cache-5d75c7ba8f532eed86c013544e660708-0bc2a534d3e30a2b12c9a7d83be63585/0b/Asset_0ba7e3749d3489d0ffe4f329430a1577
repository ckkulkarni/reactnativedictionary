238eb866742e955d2c011045398a68f6
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Asset = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _expoModulesCore = require("expo-modules-core");
var _AssetRegistry = require("react-native/Libraries/Image/AssetRegistry");
var _AssetSources = require("./AssetSources");
var AssetUris = _interopRequireWildcard(require("./AssetUris"));
var ImageAssets = _interopRequireWildcard(require("./ImageAssets"));
var _LocalAssets = require("./LocalAssets");
var _PlatformUtils = require("./PlatformUtils");
var _resolveAssetSource2 = _interopRequireDefault(require("./resolveAssetSource"));
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
var Asset = function () {
  function Asset(_ref) {
    var name = _ref.name,
      type = _ref.type,
      _ref$hash = _ref.hash,
      hash = _ref$hash === void 0 ? null : _ref$hash,
      uri = _ref.uri,
      width = _ref.width,
      height = _ref.height;
    (0, _classCallCheck2.default)(this, Asset);
    this.hash = null;
    this.localUri = null;
    this.width = null;
    this.height = null;
    this.downloading = false;
    this.downloaded = false;
    this._downloadCallbacks = [];
    this.name = name;
    this.type = type;
    this.hash = hash;
    this.uri = uri;
    if (typeof width === 'number') {
      this.width = width;
    }
    if (typeof height === 'number') {
      this.height = height;
    }
    if (hash) {
      this.localUri = (0, _LocalAssets.getLocalAssetUri)(hash, type);
      if (this.localUri) {
        this.downloaded = true;
      }
    }
    if (_expoModulesCore.Platform.OS === 'web') {
      if (!name) {
        this.name = AssetUris.getFilename(uri);
      }
      if (!type) {
        this.type = AssetUris.getFileExtension(uri);
      }
    }
  }
  (0, _createClass2.default)(Asset, [{
    key: "downloadAsync",
    value: function () {
      var _downloadAsync2 = (0, _asyncToGenerator2.default)(function* () {
        var _this = this;
        if (this.downloaded) {
          return this;
        }
        if (this.downloading) {
          yield new Promise(function (resolve, reject) {
            _this._downloadCallbacks.push({
              resolve: resolve,
              reject: reject
            });
          });
          return this;
        }
        this.downloading = true;
        try {
          if (_expoModulesCore.Platform.OS === 'web') {
            if (ImageAssets.isImageType(this.type)) {
              var _yield$ImageAssets$ge = yield ImageAssets.getImageInfoAsync(this.uri),
                width = _yield$ImageAssets$ge.width,
                height = _yield$ImageAssets$ge.height,
                name = _yield$ImageAssets$ge.name;
              this.width = width;
              this.height = height;
              this.name = name;
            } else {
              this.name = AssetUris.getFilename(this.uri);
            }
          }
          this.localUri = yield (0, _PlatformUtils.downloadAsync)(this.uri, this.hash, this.type, this.name);
          this.downloaded = true;
          this._downloadCallbacks.forEach(function (_ref2) {
            var resolve = _ref2.resolve;
            return resolve();
          });
        } catch (e) {
          this._downloadCallbacks.forEach(function (_ref3) {
            var reject = _ref3.reject;
            return reject(e);
          });
          throw e;
        } finally {
          this.downloading = false;
          this._downloadCallbacks = [];
        }
        return this;
      });
      function downloadAsync() {
        return _downloadAsync2.apply(this, arguments);
      }
      return downloadAsync;
    }()
  }], [{
    key: "loadAsync",
    value: function loadAsync(moduleId) {
      var moduleIds = Array.isArray(moduleId) ? moduleId : [moduleId];
      return Promise.all(moduleIds.map(function (moduleId) {
        return Asset.fromModule(moduleId).downloadAsync();
      }));
    }
  }, {
    key: "fromModule",
    value: function fromModule(virtualAssetModule) {
      if (typeof virtualAssetModule === 'string') {
        return Asset.fromURI(virtualAssetModule);
      }
      var meta = (0, _AssetRegistry.getAssetByID)(virtualAssetModule);
      if (!meta) {
        throw new Error(`Module "${virtualAssetModule}" is missing from the asset registry`);
      }
      if (!_PlatformUtils.IS_ENV_WITH_UPDATES_ENABLED) {
        var _resolveAssetSource = (0, _resolveAssetSource2.default)(virtualAssetModule),
          uri = _resolveAssetSource.uri;
        var asset = new Asset({
          name: meta.name,
          type: meta.type,
          hash: meta.hash,
          uri: uri,
          width: meta.width,
          height: meta.height
        });
        if (_expoModulesCore.Platform.OS === 'android' && !uri.includes(':') && (meta.width || meta.height)) {
          asset.localUri = asset.uri;
          asset.downloaded = true;
        }
        Asset.byHash[meta.hash] = asset;
        return asset;
      }
      return Asset.fromMetadata(meta);
    }
  }, {
    key: "fromMetadata",
    value: function fromMetadata(meta) {
      var metaHash = meta.hash;
      if (Asset.byHash[metaHash]) {
        return Asset.byHash[metaHash];
      }
      var _selectAssetSource = (0, _AssetSources.selectAssetSource)(meta),
        uri = _selectAssetSource.uri,
        hash = _selectAssetSource.hash;
      var asset = new Asset({
        name: meta.name,
        type: meta.type,
        hash: hash,
        uri: uri,
        width: meta.width,
        height: meta.height
      });
      Asset.byHash[metaHash] = asset;
      return asset;
    }
  }, {
    key: "fromURI",
    value: function fromURI(uri) {
      if (Asset.byUri[uri]) {
        return Asset.byUri[uri];
      }
      var type = '';
      if (uri.indexOf(';base64') > -1) {
        type = uri.split(';')[0].split('/')[1];
      } else {
        var extension = AssetUris.getFileExtension(uri);
        type = extension.startsWith('.') ? extension.substring(1) : extension;
      }
      var asset = new Asset({
        name: '',
        type: type,
        hash: null,
        uri: uri
      });
      Asset.byUri[uri] = asset;
      return asset;
    }
  }]);
  return Asset;
}();
exports.Asset = Asset;
Asset.byHash = {};
Asset.byUri = {};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwb01vZHVsZXNDb3JlIiwicmVxdWlyZSIsIl9Bc3NldFJlZ2lzdHJ5IiwiX0Fzc2V0U291cmNlcyIsIkFzc2V0VXJpcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiSW1hZ2VBc3NldHMiLCJfTG9jYWxBc3NldHMiLCJfUGxhdGZvcm1VdGlscyIsIl9yZXNvbHZlQXNzZXRTb3VyY2UyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJBc3NldCIsIl9yZWYiLCJuYW1lIiwidHlwZSIsIl9yZWYkaGFzaCIsImhhc2giLCJ1cmkiLCJ3aWR0aCIsImhlaWdodCIsIl9jbGFzc0NhbGxDaGVjazIiLCJsb2NhbFVyaSIsImRvd25sb2FkaW5nIiwiZG93bmxvYWRlZCIsIl9kb3dubG9hZENhbGxiYWNrcyIsImdldExvY2FsQXNzZXRVcmkiLCJQbGF0Zm9ybSIsIk9TIiwiZ2V0RmlsZW5hbWUiLCJnZXRGaWxlRXh0ZW5zaW9uIiwiX2NyZWF0ZUNsYXNzMiIsInZhbHVlIiwiX2Rvd25sb2FkQXN5bmMyIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3RoaXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInB1c2giLCJpc0ltYWdlVHlwZSIsIl95aWVsZCRJbWFnZUFzc2V0cyRnZSIsImdldEltYWdlSW5mb0FzeW5jIiwiZG93bmxvYWRBc3luYyIsImZvckVhY2giLCJfcmVmMiIsImUiLCJfcmVmMyIsImFwcGx5IiwiYXJndW1lbnRzIiwibG9hZEFzeW5jIiwibW9kdWxlSWQiLCJtb2R1bGVJZHMiLCJBcnJheSIsImlzQXJyYXkiLCJhbGwiLCJtYXAiLCJmcm9tTW9kdWxlIiwidmlydHVhbEFzc2V0TW9kdWxlIiwiZnJvbVVSSSIsIm1ldGEiLCJnZXRBc3NldEJ5SUQiLCJFcnJvciIsIklTX0VOVl9XSVRIX1VQREFURVNfRU5BQkxFRCIsIl9yZXNvbHZlQXNzZXRTb3VyY2UiLCJyZXNvbHZlQXNzZXRTb3VyY2UiLCJhc3NldCIsImluY2x1ZGVzIiwiYnlIYXNoIiwiZnJvbU1ldGFkYXRhIiwibWV0YUhhc2giLCJfc2VsZWN0QXNzZXRTb3VyY2UiLCJzZWxlY3RBc3NldFNvdXJjZSIsImJ5VXJpIiwiaW5kZXhPZiIsInNwbGl0IiwiZXh0ZW5zaW9uIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi9zcmMvQXNzZXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxhdGZvcm0gfSBmcm9tICdleHBvLW1vZHVsZXMtY29yZSc7XG5pbXBvcnQgeyBnZXRBc3NldEJ5SUQgfSBmcm9tICdyZWFjdC1uYXRpdmUvTGlicmFyaWVzL0ltYWdlL0Fzc2V0UmVnaXN0cnknO1xuXG5pbXBvcnQgeyBBc3NldE1ldGFkYXRhLCBzZWxlY3RBc3NldFNvdXJjZSB9IGZyb20gJy4vQXNzZXRTb3VyY2VzJztcbmltcG9ydCAqIGFzIEFzc2V0VXJpcyBmcm9tICcuL0Fzc2V0VXJpcyc7XG5pbXBvcnQgKiBhcyBJbWFnZUFzc2V0cyBmcm9tICcuL0ltYWdlQXNzZXRzJztcbmltcG9ydCB7IGdldExvY2FsQXNzZXRVcmkgfSBmcm9tICcuL0xvY2FsQXNzZXRzJztcbmltcG9ydCB7IGRvd25sb2FkQXN5bmMsIElTX0VOVl9XSVRIX1VQREFURVNfRU5BQkxFRCB9IGZyb20gJy4vUGxhdGZvcm1VdGlscyc7XG5pbXBvcnQgcmVzb2x2ZUFzc2V0U291cmNlIGZyb20gJy4vcmVzb2x2ZUFzc2V0U291cmNlJztcblxuLy8gQGRvY3NNaXNzaW5nXG5leHBvcnQgdHlwZSBBc3NldERlc2NyaXB0b3IgPSB7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBoYXNoPzogc3RyaW5nIHwgbnVsbDtcbiAgdXJpOiBzdHJpbmc7XG4gIHdpZHRoPzogbnVtYmVyIHwgbnVsbDtcbiAgaGVpZ2h0PzogbnVtYmVyIHwgbnVsbDtcbn07XG5cbnR5cGUgRG93bmxvYWRQcm9taXNlQ2FsbGJhY2tzID0ge1xuICByZXNvbHZlOiAoKSA9PiB2b2lkO1xuICByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgeyBBc3NldE1ldGFkYXRhIH07XG5cbi8vIEBuZWVkc0F1ZGl0XG4vKipcbiAqIFRoZSBgQXNzZXRgIGNsYXNzIHJlcHJlc2VudHMgYW4gYXNzZXQgaW4geW91ciBhcHAuIEl0IGdpdmVzIG1ldGFkYXRhIGFib3V0IHRoZSBhc3NldCAoc3VjaCBhcyBpdHNcbiAqIG5hbWUgYW5kIHR5cGUpIGFuZCBwcm92aWRlcyBmYWNpbGl0aWVzIHRvIGxvYWQgdGhlIGFzc2V0IGRhdGEuXG4gKi9cbmV4cG9ydCBjbGFzcyBBc3NldCB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGJ5SGFzaCA9IHt9O1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBieVVyaSA9IHt9O1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgYXNzZXQgZmlsZSB3aXRob3V0IHRoZSBleHRlbnNpb24uIEFsc28gd2l0aG91dCB0aGUgcGFydCBmcm9tIGBAYCBvbndhcmQgaW4gdGhlXG4gICAqIGZpbGVuYW1lICh1c2VkIHRvIHNwZWNpZnkgc2NhbGUgZmFjdG9yIGZvciBpbWFnZXMpLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGV4dGVuc2lvbiBvZiB0aGUgYXNzZXQgZmlsZW5hbWUuXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgTUQ1IGhhc2ggb2YgdGhlIGFzc2V0J3MgZGF0YS5cbiAgICovXG4gIGhhc2g6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAvKipcbiAgICogQSBVUkkgdGhhdCBwb2ludHMgdG8gdGhlIGFzc2V0J3MgZGF0YSBvbiB0aGUgcmVtb3RlIHNlcnZlci4gV2hlbiBydW5uaW5nIHRoZSBwdWJsaXNoZWQgdmVyc2lvblxuICAgKiBvZiB5b3VyIGFwcCwgdGhpcyByZWZlcnMgdG8gdGhlIGxvY2F0aW9uIG9uIEV4cG8ncyBhc3NldCBzZXJ2ZXIgd2hlcmUgRXhwbyBoYXMgc3RvcmVkIHlvdXJcbiAgICogYXNzZXQuIFdoZW4gcnVubmluZyB0aGUgYXBwIGZyb20gRXhwbyBDTEkgZHVyaW5nIGRldmVsb3BtZW50LCB0aGlzIFVSSSBwb2ludHMgdG8gRXhwbyBDTEknc1xuICAgKiBzZXJ2ZXIgcnVubmluZyBvbiB5b3VyIGNvbXB1dGVyIGFuZCB0aGUgYXNzZXQgaXMgc2VydmVkIGRpcmVjdGx5IGZyb20geW91ciBjb21wdXRlci4gSWYgeW91XG4gICAqIGFyZSBub3QgdXNpbmcgQ2xhc3NpYyBVcGRhdGVzIChsZWdhY3kpLCB0aGlzIGZpZWxkIHNob3VsZCBiZSBpZ25vcmVkIGFzIHdlIGVuc3VyZSB5b3VyIGFzc2V0c1xuICAgKiBhcmUgb24gZGV2aWNlIGJlZm9yZSBiZWZvcmUgcnVubmluZyB5b3VyIGFwcGxpY2F0aW9uIGxvZ2ljLlxuICAgKi9cbiAgdXJpOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBJZiB0aGUgYXNzZXQgaGFzIGJlZW4gZG93bmxvYWRlZCAoYnkgY2FsbGluZyBbYGRvd25sb2FkQXN5bmMoKWBdKCNkb3dubG9hZGFzeW5jKSksIHRoZVxuICAgKiBgZmlsZTovL2AgVVJJIHBvaW50aW5nIHRvIHRoZSBsb2NhbCBmaWxlIG9uIHRoZSBkZXZpY2UgdGhhdCBjb250YWlucyB0aGUgYXNzZXQgZGF0YS5cbiAgICovXG4gIGxvY2FsVXJpOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgLyoqXG4gICAqIElmIHRoZSBhc3NldCBpcyBhbiBpbWFnZSwgdGhlIHdpZHRoIG9mIHRoZSBpbWFnZSBkYXRhIGRpdmlkZWQgYnkgdGhlIHNjYWxlIGZhY3Rvci4gVGhlIHNjYWxlXG4gICAqIGZhY3RvciBpcyB0aGUgbnVtYmVyIGFmdGVyIGBAYCBpbiB0aGUgZmlsZW5hbWUsIG9yIGAxYCBpZiBub3QgcHJlc2VudC5cbiAgICovXG4gIHdpZHRoOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgLyoqXG4gICAqIElmIHRoZSBhc3NldCBpcyBhbiBpbWFnZSwgdGhlIGhlaWdodCBvZiB0aGUgaW1hZ2UgZGF0YSBkaXZpZGVkIGJ5IHRoZSBzY2FsZSBmYWN0b3IuIFRoZSBzY2FsZSBmYWN0b3IgaXMgdGhlIG51bWJlciBhZnRlciBgQGAgaW4gdGhlIGZpbGVuYW1lLCBvciBgMWAgaWYgbm90IHByZXNlbnQuXG4gICAqL1xuICBoZWlnaHQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAvLyBAZG9jc01pc3NpbmdcbiAgZG93bmxvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLy8gQGRvY3NNaXNzaW5nXG4gIGRvd25sb2FkZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kb3dubG9hZENhbGxiYWNrczogRG93bmxvYWRQcm9taXNlQ2FsbGJhY2tzW10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIHR5cGUsIGhhc2ggPSBudWxsLCB1cmksIHdpZHRoLCBoZWlnaHQgfTogQXNzZXREZXNjcmlwdG9yKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuaGFzaCA9IGhhc2g7XG4gICAgdGhpcy51cmkgPSB1cmk7XG5cbiAgICBpZiAodHlwZW9mIHdpZHRoID09PSAnbnVtYmVyJykge1xuICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGhlaWdodCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cblxuICAgIGlmIChoYXNoKSB7XG4gICAgICB0aGlzLmxvY2FsVXJpID0gZ2V0TG9jYWxBc3NldFVyaShoYXNoLCB0eXBlKTtcbiAgICAgIGlmICh0aGlzLmxvY2FsVXJpKSB7XG4gICAgICAgIHRoaXMuZG93bmxvYWRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFBsYXRmb3JtLk9TID09PSAnd2ViJykge1xuICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IEFzc2V0VXJpcy5nZXRGaWxlbmFtZSh1cmkpO1xuICAgICAgfVxuICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IEFzc2V0VXJpcy5nZXRGaWxlRXh0ZW5zaW9uKHVyaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQG5lZWRzQXVkaXRcbiAgLyoqXG4gICAqIEEgaGVscGVyIHRoYXQgd3JhcHMgYEFzc2V0LmZyb21Nb2R1bGUobW9kdWxlKS5kb3dubG9hZEFzeW5jYCBmb3IgY29udmVuaWVuY2UuXG4gICAqIEBwYXJhbSBtb2R1bGVJZCBBbiBhcnJheSBvZiBgcmVxdWlyZSgncGF0aC90by9maWxlJylgIG9yIGV4dGVybmFsIG5ldHdvcmsgVVJMcy4gQ2FuIGFsc28gYmVcbiAgICoganVzdCBvbmUgbW9kdWxlIG9yIFVSTCB3aXRob3V0IGFuIEFycmF5LlxuICAgKiBAcmV0dXJuIFJldHVybnMgYSBQcm9taXNlIHRoYXQgZnVsZmlsbHMgd2l0aCBhbiBhcnJheSBvZiBgQXNzZXRgcyB3aGVuIHRoZSBhc3NldChzKSBoYXMgYmVlblxuICAgKiBzYXZlZCB0byBkaXNrLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBbeyBsb2NhbFVyaSB9XSA9IGF3YWl0IEFzc2V0LmxvYWRBc3luYyhyZXF1aXJlKCcuL2Fzc2V0cy9zbmFjay1pY29uLnBuZycpKTtcbiAgICogYGBgXG4gICAqL1xuICBzdGF0aWMgbG9hZEFzeW5jKG1vZHVsZUlkOiBudW1iZXIgfCBudW1iZXJbXSB8IHN0cmluZyB8IHN0cmluZ1tdKTogUHJvbWlzZTxBc3NldFtdPiB7XG4gICAgY29uc3QgbW9kdWxlSWRzID0gQXJyYXkuaXNBcnJheShtb2R1bGVJZCkgPyBtb2R1bGVJZCA6IFttb2R1bGVJZF07XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKG1vZHVsZUlkcy5tYXAoKG1vZHVsZUlkKSA9PiBBc3NldC5mcm9tTW9kdWxlKG1vZHVsZUlkKS5kb3dubG9hZEFzeW5jKCkpKTtcbiAgfVxuXG4gIC8vIEBuZWVkc0F1ZGl0XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBbYEFzc2V0YF0oI2Fzc2V0KSBpbnN0YW5jZSByZXByZXNlbnRpbmcgYW4gYXNzZXQgZ2l2ZW4gaXRzIG1vZHVsZSBvciBVUkwuXG4gICAqIEBwYXJhbSB2aXJ0dWFsQXNzZXRNb2R1bGUgVGhlIHZhbHVlIG9mIGByZXF1aXJlKCdwYXRoL3RvL2ZpbGUnKWAgZm9yIHRoZSBhc3NldCBvciBleHRlcm5hbFxuICAgKiBuZXR3b3JrIFVSTFxuICAgKiBAcmV0dXJuIFRoZSBbYEFzc2V0YF0oI2Fzc2V0KSBpbnN0YW5jZSBmb3IgdGhlIGFzc2V0LlxuICAgKi9cbiAgc3RhdGljIGZyb21Nb2R1bGUodmlydHVhbEFzc2V0TW9kdWxlOiBudW1iZXIgfCBzdHJpbmcpOiBBc3NldCB7XG4gICAgaWYgKHR5cGVvZiB2aXJ0dWFsQXNzZXRNb2R1bGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gQXNzZXQuZnJvbVVSSSh2aXJ0dWFsQXNzZXRNb2R1bGUpO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGEgPSBnZXRBc3NldEJ5SUQodmlydHVhbEFzc2V0TW9kdWxlKTtcbiAgICBpZiAoIW1ldGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTW9kdWxlIFwiJHt2aXJ0dWFsQXNzZXRNb2R1bGV9XCIgaXMgbWlzc2luZyBmcm9tIHRoZSBhc3NldCByZWdpc3RyeWApO1xuICAgIH1cblxuICAgIC8vIE91dHNpZGUgb2YgdGhlIG1hbmFnZWQgZW52IHdlIG5lZWQgdGhlIG1vZHVsZUlkIHRvIGluaXRpYWxpemUgdGhlIGFzc2V0XG4gICAgLy8gYmVjYXVzZSByZXNvbHZlQXNzZXRTb3VyY2UgZGVwZW5kcyBvbiBpdFxuICAgIGlmICghSVNfRU5WX1dJVEhfVVBEQVRFU19FTkFCTEVEKSB7XG4gICAgICBjb25zdCB7IHVyaSB9ID0gcmVzb2x2ZUFzc2V0U291cmNlKHZpcnR1YWxBc3NldE1vZHVsZSk7XG4gICAgICBjb25zdCBhc3NldCA9IG5ldyBBc3NldCh7XG4gICAgICAgIG5hbWU6IG1ldGEubmFtZSxcbiAgICAgICAgdHlwZTogbWV0YS50eXBlLFxuICAgICAgICBoYXNoOiBtZXRhLmhhc2gsXG4gICAgICAgIHVyaSxcbiAgICAgICAgd2lkdGg6IG1ldGEud2lkdGgsXG4gICAgICAgIGhlaWdodDogbWV0YS5oZWlnaHQsXG4gICAgICB9KTtcblxuICAgICAgLy8gVE9ETzogRmlsZVN5c3RlbSBzaG91bGQgcHJvYmFibHkgc3VwcG9ydCAnZG93bmxvYWRpbmcnIGZyb20gZHJhd2FibGVcbiAgICAgIC8vIHJlc291cmNlcyBCdXQgZm9yIG5vdyBpdCBkb2Vzbid0IChpdCBvbmx5IHN1cHBvcnRzIHJhdyByZXNvdXJjZXMpIGFuZFxuICAgICAgLy8gUmVhY3QgTmF0aXZlJ3MgSW1hZ2Ugd29ya3MgZmluZSB3aXRoIGRyYXdhYmxlIHJlc291cmNlIG5hbWVzIGZvclxuICAgICAgLy8gaW1hZ2VzLlxuICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcgJiYgIXVyaS5pbmNsdWRlcygnOicpICYmIChtZXRhLndpZHRoIHx8IG1ldGEuaGVpZ2h0KSkge1xuICAgICAgICBhc3NldC5sb2NhbFVyaSA9IGFzc2V0LnVyaTtcbiAgICAgICAgYXNzZXQuZG93bmxvYWRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIEFzc2V0LmJ5SGFzaFttZXRhLmhhc2hdID0gYXNzZXQ7XG4gICAgICByZXR1cm4gYXNzZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFzc2V0LmZyb21NZXRhZGF0YShtZXRhKTtcbiAgfVxuXG4gIC8vIEBkb2NzTWlzc2luZ1xuICBzdGF0aWMgZnJvbU1ldGFkYXRhKG1ldGE6IEFzc2V0TWV0YWRhdGEpOiBBc3NldCB7XG4gICAgLy8gVGhlIGhhc2ggb2YgdGhlIHdob2xlIGFzc2V0LCBub3QgdG8gYmUgY29uZnVzZWQgd2l0aCB0aGUgaGFzaCBvZiBhIHNwZWNpZmljIGZpbGUgcmV0dXJuZWRcbiAgICAvLyBmcm9tIGBzZWxlY3RBc3NldFNvdXJjZWBcbiAgICBjb25zdCBtZXRhSGFzaCA9IG1ldGEuaGFzaDtcbiAgICBpZiAoQXNzZXQuYnlIYXNoW21ldGFIYXNoXSkge1xuICAgICAgcmV0dXJuIEFzc2V0LmJ5SGFzaFttZXRhSGFzaF07XG4gICAgfVxuXG4gICAgY29uc3QgeyB1cmksIGhhc2ggfSA9IHNlbGVjdEFzc2V0U291cmNlKG1ldGEpO1xuICAgIGNvbnN0IGFzc2V0ID0gbmV3IEFzc2V0KHtcbiAgICAgIG5hbWU6IG1ldGEubmFtZSxcbiAgICAgIHR5cGU6IG1ldGEudHlwZSxcbiAgICAgIGhhc2gsXG4gICAgICB1cmksXG4gICAgICB3aWR0aDogbWV0YS53aWR0aCxcbiAgICAgIGhlaWdodDogbWV0YS5oZWlnaHQsXG4gICAgfSk7XG4gICAgQXNzZXQuYnlIYXNoW21ldGFIYXNoXSA9IGFzc2V0O1xuICAgIHJldHVybiBhc3NldDtcbiAgfVxuXG4gIC8vIEBkb2NzTWlzc2luZ1xuICBzdGF0aWMgZnJvbVVSSSh1cmk6IHN0cmluZyk6IEFzc2V0IHtcbiAgICBpZiAoQXNzZXQuYnlVcmlbdXJpXSkge1xuICAgICAgcmV0dXJuIEFzc2V0LmJ5VXJpW3VyaV07XG4gICAgfVxuXG4gICAgLy8gUG9zc2libHkgYSBCYXNlNjQtZW5jb2RlZCBVUklcbiAgICBsZXQgdHlwZSA9ICcnO1xuICAgIGlmICh1cmkuaW5kZXhPZignO2Jhc2U2NCcpID4gLTEpIHtcbiAgICAgIHR5cGUgPSB1cmkuc3BsaXQoJzsnKVswXS5zcGxpdCgnLycpWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBleHRlbnNpb24gPSBBc3NldFVyaXMuZ2V0RmlsZUV4dGVuc2lvbih1cmkpO1xuICAgICAgdHlwZSA9IGV4dGVuc2lvbi5zdGFydHNXaXRoKCcuJykgPyBleHRlbnNpb24uc3Vic3RyaW5nKDEpIDogZXh0ZW5zaW9uO1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2V0ID0gbmV3IEFzc2V0KHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgdHlwZSxcbiAgICAgIGhhc2g6IG51bGwsXG4gICAgICB1cmksXG4gICAgfSk7XG5cbiAgICBBc3NldC5ieVVyaVt1cmldID0gYXNzZXQ7XG5cbiAgICByZXR1cm4gYXNzZXQ7XG4gIH1cblxuICAvLyBAbmVlZHNBdWRpdFxuICAvKipcbiAgICogRG93bmxvYWRzIHRoZSBhc3NldCBkYXRhIHRvIGEgbG9jYWwgZmlsZSBpbiB0aGUgZGV2aWNlJ3MgY2FjaGUgZGlyZWN0b3J5LiBPbmNlIHRoZSByZXR1cm5lZFxuICAgKiBwcm9taXNlIGlzIGZ1bGZpbGxlZCB3aXRob3V0IGVycm9yLCB0aGUgW2Bsb2NhbFVyaWBdKCNhc3NldGxvY2FsdXJpKSBmaWVsZCBvZiB0aGlzIGFzc2V0IHBvaW50c1xuICAgKiB0byBhIGxvY2FsIGZpbGUgY29udGFpbmluZyB0aGUgYXNzZXQgZGF0YS4gVGhlIGFzc2V0IGlzIG9ubHkgZG93bmxvYWRlZCBpZiBhbiB1cC10by1kYXRlIGxvY2FsXG4gICAqIGZpbGUgZm9yIHRoZSBhc3NldCBpc24ndCBhbHJlYWR5IHByZXNlbnQgZHVlIHRvIGFuIGVhcmxpZXIgZG93bmxvYWQuIFRoZSBkb3dubG9hZGVkIGBBc3NldGBcbiAgICogd2lsbCBiZSByZXR1cm5lZCB3aGVuIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkLlxuICAgKiBAcmV0dXJuIFJldHVybnMgYSBQcm9taXNlIHdoaWNoIGZ1bGZpbGxzIHdpdGggYW4gYEFzc2V0YCBpbnN0YW5jZS5cbiAgICovXG4gIGFzeW5jIGRvd25sb2FkQXN5bmMoKTogUHJvbWlzZTx0aGlzPiB7XG4gICAgaWYgKHRoaXMuZG93bmxvYWRlZCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmICh0aGlzLmRvd25sb2FkaW5nKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMuX2Rvd25sb2FkQ2FsbGJhY2tzLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aGlzLmRvd25sb2FkaW5nID0gdHJ1ZTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICd3ZWInKSB7XG4gICAgICAgIGlmIChJbWFnZUFzc2V0cy5pc0ltYWdlVHlwZSh0aGlzLnR5cGUpKSB7XG4gICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBuYW1lIH0gPSBhd2FpdCBJbWFnZUFzc2V0cy5nZXRJbWFnZUluZm9Bc3luYyh0aGlzLnVyaSk7XG4gICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5uYW1lID0gQXNzZXRVcmlzLmdldEZpbGVuYW1lKHRoaXMudXJpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5sb2NhbFVyaSA9IGF3YWl0IGRvd25sb2FkQXN5bmModGhpcy51cmksIHRoaXMuaGFzaCwgdGhpcy50eXBlLCB0aGlzLm5hbWUpO1xuXG4gICAgICB0aGlzLmRvd25sb2FkZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fZG93bmxvYWRDYWxsYmFja3MuZm9yRWFjaCgoeyByZXNvbHZlIH0pID0+IHJlc29sdmUoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5fZG93bmxvYWRDYWxsYmFja3MuZm9yRWFjaCgoeyByZWplY3QgfSkgPT4gcmVqZWN0KGUpKTtcbiAgICAgIHRocm93IGU7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuZG93bmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Rvd25sb2FkQ2FsbGJhY2tzID0gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsZ0JBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLGFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUMsdUJBQUEsQ0FBQUosT0FBQTtBQUNBLElBQUFLLFdBQUEsR0FBQUQsdUJBQUEsQ0FBQUosT0FBQTtBQUNBLElBQUFNLFlBQUEsR0FBQU4sT0FBQTtBQUNBLElBQUFPLGNBQUEsR0FBQVAsT0FBQTtBQUNBLElBQUFRLG9CQUFBLEdBQUFDLHNCQUFBLENBQUFULE9BQUE7QUFBc0QsU0FBQVUseUJBQUFDLFdBQUEsZUFBQUMsT0FBQSxrQ0FBQUMsaUJBQUEsT0FBQUQsT0FBQSxRQUFBRSxnQkFBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxXQUFBLFdBQUFBLFdBQUEsR0FBQUcsZ0JBQUEsR0FBQUQsaUJBQUEsS0FBQUYsV0FBQTtBQUFBLFNBQUFQLHdCQUFBVyxHQUFBLEVBQUFKLFdBQUEsU0FBQUEsV0FBQSxJQUFBSSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxXQUFBRCxHQUFBLFFBQUFBLEdBQUEsb0JBQUFBLEdBQUEsd0JBQUFBLEdBQUEsNEJBQUFFLE9BQUEsRUFBQUYsR0FBQSxVQUFBRyxLQUFBLEdB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