{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_requireNativeModule","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","_possibleConstructorReturn2","sham","Proxy","Boolean","prototype","valueOf","call","e","nativeComponentsCache","Map","requireCachedNativeComponent","viewName","cachedNativeComponent","get","nativeComponent","requireNativeComponent","set","requireNativeViewManager","viewManagersMetadata","NativeModules","NativeUnimoduleProxy","viewManagerConfig","__DEV__","exportedViewManagerNames","join","console","warn","concat","reactNativeViewName","ReactNativeComponent","NativeComponent","_React$PureComponent","_inherits2","_super","_this","_classCallCheck2","_len","args","Array","_key","_assertThisInitialized2","_createClass2","value","componentDidMount","nativeTag","findNodeHandle","render","React","createElement","props","PureComponent","nativeModule","requireNativeModule","nativeViewPrototype","ViewPrototype","assign","_unused"],"sources":["../src/NativeViewManagerAdapter.native.tsx"],"sourcesContent":["import React from 'react';\nimport { findNodeHandle, NativeModules, requireNativeComponent, HostComponent } from 'react-native';\n\nimport { requireNativeModule } from './requireNativeModule';\n\n// To make the transition from React Native's `requireNativeComponent` to Expo's\n// `requireNativeViewManager` as easy as possible, `requireNativeViewManager` is a drop-in\n// replacement for `requireNativeComponent`.\n//\n// For each view manager, we create a wrapper component that accepts all of the props available to\n// the author of the universal module. This wrapper component splits the props into two sets: props\n// passed to React Native's View (ex: style, testID) and custom view props, which are passed to the\n// adapter view component in a prop called `proxiedProperties`.\n\n/**\n * A map that caches registered native components.\n */\nconst nativeComponentsCache = new Map<string, HostComponent<any>>();\n\n/**\n * Requires a React Native component from cache if possible. This prevents\n * \"Tried to register two views with the same name\" errors on fast refresh, but\n * also when there are multiple versions of the same package with native component.\n */\nfunction requireCachedNativeComponent<Props>(viewName: string): HostComponent<Props> {\n  const cachedNativeComponent = nativeComponentsCache.get(viewName);\n\n  if (!cachedNativeComponent) {\n    const nativeComponent = requireNativeComponent<Props>(viewName);\n    nativeComponentsCache.set(viewName, nativeComponent);\n    return nativeComponent;\n  }\n  return cachedNativeComponent;\n}\n\n/**\n * A drop-in replacement for `requireNativeComponent`.\n */\nexport function requireNativeViewManager<P>(viewName: string): React.ComponentType<P> {\n  const { viewManagersMetadata } = NativeModules.NativeUnimoduleProxy;\n  const viewManagerConfig = viewManagersMetadata?.[viewName];\n\n  if (__DEV__ && !viewManagerConfig) {\n    const exportedViewManagerNames = Object.keys(viewManagersMetadata).join(', ');\n    console.warn(\n      `The native view manager required by name (${viewName}) from NativeViewManagerAdapter isn't exported by expo-modules-core. Views of this type may not render correctly. Exported view managers: [${exportedViewManagerNames}].`\n    );\n  }\n\n  // Set up the React Native native component, which is an adapter to the universal module's view\n  // manager\n  const reactNativeViewName = `ViewManagerAdapter_${viewName}`;\n  const ReactNativeComponent = requireCachedNativeComponent(reactNativeViewName);\n\n  class NativeComponent extends React.PureComponent<P> {\n    static displayName = viewName;\n\n    // This will be accessed from native when the prototype functions are called,\n    // in order to find the associated native view.\n    nativeTag: number | null = null;\n\n    componentDidMount(): void {\n      this.nativeTag = findNodeHandle(this);\n    }\n\n    render(): React.ReactNode {\n      return <ReactNativeComponent {...this.props} />;\n    }\n  }\n\n  try {\n    const nativeModule = requireNativeModule(viewName);\n    const nativeViewPrototype = nativeModule.ViewPrototype;\n\n    if (nativeViewPrototype) {\n      // Assign native view functions to the component prototype so they can be accessed from the ref.\n      Object.assign(NativeComponent.prototype, nativeViewPrototype);\n    }\n  } catch {\n    // `requireNativeModule` may throw an error when the native module cannot be found.\n    // In some tests we don't mock the entire modules, but we do want to mock native views. For now,\n    // until we still have to support the legacy modules proxy and don't have better ways to mock,\n    // let's just gracefully skip assigning the prototype functions.\n    // See: https://github.com/expo/expo/blob/main/packages/expo-modules-core/src/__tests__/NativeViewManagerAdapter-test.native.tsx\n  }\n\n  return NativeComponent;\n}\n"],"mappings":"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"}