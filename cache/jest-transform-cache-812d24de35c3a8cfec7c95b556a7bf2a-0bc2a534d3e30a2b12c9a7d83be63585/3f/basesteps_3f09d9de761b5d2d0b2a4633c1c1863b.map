{"version":3,"names":["_getJestObj","mock","useNavigation","jest","fn","mockReturnValue","navigate","_interopRequireDefault","require","_asyncToGenerator2","_Base","_native","_reactNative","_jestCucumber","_axios","_jsxRuntime","_require","navigation","feature","loadFeature","defineFeature","test","_ref","given","when","then","and","screen","render","jsx","default","expect","toBeDefined","input","getByTestId","submitButton","fireEvent","changeText","press","mockAxios","spyOn","axios","mockResolvedValueOnce","data","meanings","definitions","definition","waitFor","getByText","definitionBlock","toBeCalled"],"sources":["base.steps.tsx"],"sourcesContent":["import Base from \"../../Base\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\r\nimport { render, fireEvent, waitFor } from \"@testing-library/react-native\";\r\nimport { loadFeature, defineFeature } from \"jest-cucumber\";\r\nimport \"react-native-get-random-values\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport axios from \"axios\";\r\nconst navigation = useNavigation<NativeStackNavigationProp<any>>();\r\njest.mock(\"@react-navigation/native\", () => {\r\n  return {\r\n    useNavigation: jest.fn().mockReturnValue({\r\n      navigate: jest.fn(),\r\n    }),\r\n  };\r\n});\r\n\r\nconst feature = loadFeature(\"Apps/features/base.feature\");\r\ndefineFeature(feature, (test) => {\r\n  test(\"The component renders and a random word is fetched\", ({\r\n    given,\r\n    when,\r\n    then,\r\n    and,\r\n  }) => {\r\n    const screen = render(<Base />);\r\n    given(\"The user is on the Home page\", () => {\r\n      expect(screen).toBeDefined();\r\n    });\r\n    when(\"The user inputs a word and submits it\", async () => {\r\n      const input = screen.getByTestId(\"word-input\");\r\n      const submitButton = screen.getByTestId(\"submit-button\");\r\n\r\n      fireEvent.changeText(input, \"example\");\r\n      fireEvent.press(submitButton);\r\n\r\n      const mockAxios = jest.spyOn(axios, \"get\");\r\n      mockAxios.mockResolvedValueOnce({\r\n        data: [\r\n          {\r\n            meanings: [\r\n              {\r\n                definitions: [\r\n                  { definition: \"a thing characteristic of its kind\" },\r\n                ],\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      });\r\n\r\n      // await waitFor(() => {\r\n      //   expect(\r\n      //     screen.getByText(\"a thing characteristic of its kind\")\r\n      //   ).toBeDefined();\r\n      // });\r\n    });\r\n    then(\"the definition of the word is fetched and displayed\", async () => {\r\n      await waitFor(() => {\r\n        expect(\r\n          screen.getByText(\"a thing characteristic of its kind\")\r\n        ).toBeDefined();\r\n      });\r\n    });\r\n    and(\r\n      \"clicking on the definition takes the user to the Details page for that word\",\r\n      async () => {\r\n        const definitionBlock = screen.getByTestId(\"definition-block\");\r\n        fireEvent.press(definitionBlock);\r\n        expect(navigation.navigate).toBeCalled();\r\n      }\r\n    );\r\n  });\r\n});\r\n"],"mappings":"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"}